{% extends 'shop/base.html' %}
{% load static %}
{% block body %}

<!-- Auth Modal -->
<div class="modal fade" id="authModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content p-4 rounded-4 shadow border-0">

      <!-- Header -->
      <div class="modal-header border-0">
        <h5 class="modal-title fw-bold text-success">Welcome to GreenCart</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Body -->
      <div class="modal-body">
        <!-- Tabs -->
        <ul class="nav nav-tabs nav-justified mb-4" id="authTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active text-success fw-bold" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button">
              Login
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link fw-bold text-success" id="signup-tab" data-bs-toggle="tab" data-bs-target="#signup" type="button">
              Sign Up
            </button>
          </li>
        </ul>

        <!-- Tabs Content -->
        <div class="tab-content" id="authTabsContent">

          <!-- Login Tab -->
          <div class="tab-pane fade show active" id="login" role="tabpanel">
            <form method="post" action="{% url 'login' %}">
              {% csrf_token %}
              <input name="email" type="email" class="form-control mb-3 rounded-3" placeholder="Email" required>
              <input name="password" type="password" class="form-control mb-3 rounded-3" placeholder="Password" required>
              <button type="submit" class="btn btn-success w-100 rounded-3">Login</button>
            </form>
          </div>

          <!-- Signup Tab -->
          <div class="tab-pane fade" id="signup" role="tabpanel">
            <form method="post" action="{% url 'signup' %}">
              {% csrf_token %}
              <input name="first_name" type="text" class="form-control mb-2 rounded-3" placeholder="First Name" required>
              <input name="last_name" type="text" class="form-control mb-2 rounded-3" placeholder="Last Name" required>
              <input name="phone" type="text" class="form-control mb-2 rounded-3" placeholder="Phone Number" required>
              <input name="email" type="email" class="form-control mb-2 rounded-3" placeholder="Email" required>
              <input name="password1" type="password" class="form-control mb-2 rounded-3" placeholder="Password" required>
              <input name="password2" type="password" class="form-control mb-3 rounded-3" placeholder="Confirm Password" required>
              <button type="submit" class="btn btn-success w-100 rounded-3">Register</button>
            </form>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>

<!-- Automatically Show Modal if not authenticated -->
{% if not request.user.is_authenticated %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var modalEl = document.getElementById('authModal');
    if (modalEl) {
      var authModal = new bootstrap.Modal(modalEl);
      authModal.show();
    }
  });
</script>
{% endif %}

{% endblock %}
